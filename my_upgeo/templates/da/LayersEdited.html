{% extends "base.html" %}
{% block extra_head %}
<title>Pengeo</title>
{%load static%}
      <link rel="stylesheet" href="{% static '/leaflet/leaflet.css'%}"/>
      <script src="{% static '/leaflet/leaflet.js'%}"></script>
      <link rel="stylesheet" href="{% static 'css/da/da.css'%}">
      <script src="{% static 'proj4js/lib/proj4js-combined.js'%}"></script>
      <link rel="stylesheet" href="{% static 'leaflet.table/supagrid.css'%}" />
      <link rel="stylesheet" href="{% static 'leaflet.table/leaflet.table.css'%}" />
      <script src="{% static 'leaflet.table/supagrid.js'%}" type="text/javascript"></script>
      <script src="{% static 'leaflet.table/leaflet.table.js'%}" type="text/javascript"></script>
      <style media="screen">
          #mapid { height:500px; }
          #wrap{
            margin-top: 0px;
            padding: 0px;
          }
          #ruleContainer{
            padding-left: 39%;
          }
          #attr1{
          margin-left: 0.4%;;
          }
          .result{
            margin-left: 0px;
          }
          #attr1 ,#attr2 ,#layers
            {
             min-width: 16% !important;
             height:2%!important;
             border-radius: 3px !important;
             margin-bottom: 1px !important;
             -webkit-appearance: none !important;
             -moz-appearance: none !important;
             appearance: none !important;      /* Remove default arrow */
             background-image: url(...);   /* Add custom arrow */
          }
      </style>
{% endblock %}

{% block middle %}
<div id="mapid"></div>
{% for layer in layers %}
     {{ layer.keys }}
{% endfor %}
<script type="text/javascript">
  var mymap;
  var baeMap;
  var view;
  var zoom;
function loadMap(){
      if (view){
        console.log(zoom);
         mymap = L.map('mapid',{editable: true}).setView([view.lat, view.lng],zoom);
      }else{
          mymap = L.map('mapid',{editable: true}).setView([51.505, -0.09], 4);
      }
      baeMap=L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(mymap);
      isMap = true;
      }

loadMap()

var layers=JSON.parse('{{layers | safe}}')

for(let i=0;i<layers.length;i++){
  var layerName=Object.keys(layers[i])[0]
  console.log(layerName);
  L.geoJSON(layers[i][layerName]).addTo(mymap)
}
// console.log(geoLayers[0]);
// console.log(geoLayers);


</script>




{% endblock %}
